(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,794804,e=>{"use strict";e.s(["TeamSwitchPrompt",()=>d]);var t=e.i(637651),s=e.i(934652),n=e.i(443696),i=e.i(723008),a=e.i(486492),o=e.i(724499),l=e.i(353315);e.i(968648);var r=e.i(873329),c=e.i(410289);function d(e){let{switchToPersonalTeam:d,teamId:u,attemptAutoSwitch:m=!1,title:h,description:v}=e,{t:x}=(0,r.useTranslation)("base"),{switchTeam:p,isSwitchingTeam:f,teams:g,isLoadingTeams:j}=(0,s.useEnterprise)(),[w,C]=(0,l.useState)("idle"),N=(0,o.useRouting)(),S=(0,l.useMemo)(()=>!!d||(null==g?void 0:g.some(e=>e.teamId===u)),[g,u,d]),b=(0,l.useMemo)(()=>{var e;return d?x("switch-team.personal","Personal"):null==g||null==(e=g.find(e=>e.teamId===u))?void 0:e.name},[g,u,d,x]),y=(0,l.useCallback)(()=>{if(!f)return p({teamId:d?null:null!=u?u:null,router:N,reloadPage:!0})},[p,f,d,u,N]);return(0,l.useEffect)(()=>{if("idle"===w&&m){var e;C("attempting"),null==(e=y())||e.catch(()=>{(0,a.logError)("team-switch-prompt:auto-switch","Failed to auto switch team"),C("failed")})}},[y,w,m]),(0,t.jsx)("div",{className:"flex flex-col items-center justify-center min-h-dvh w-full p-4",children:j||"idle"===w&&m?(0,t.jsxs)("div",{className:"max-w-xl flex flex-col items-center justify-center",children:[(0,t.jsx)(c.Skeleton,{className:"h-10 w-48 mb-6"}),(0,t.jsx)(c.Skeleton,{className:"h-6 w-72 mb-3"}),(0,t.jsx)(c.Skeleton,{className:"h-10 w-40 mt-8"})]}):(0,t.jsx)("div",{className:"max-w-xl flex flex-col items-center justify-center",children:"attempting"===w?(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-lg font-medium",children:x("switch-team.auto-switch-message","Switching to {{teamName}}",{teamName:b})}),(0,t.jsx)(i.Spinner,{size:"sm"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"text-3xl font-medium text-center whitespace-pre",children:S?h||x("switch-team.title","Switch Workspace"):x("switch-team.invalid-license.title","Access Denied")}),(0,t.jsx)("div",{className:"mt-6 text-secondary text-center whitespace-pre-wrap",children:S?v||x("switch-team.description","Switch to {{teamName}} to access this conversation.",{teamName:b}):x("switch-team.invalid-license.description","You don't have access to this team. Please contact the team admin to gain access.")}),S&&(0,t.jsx)(n.Button,{variant:"secondary",size:"md",shape:"rectangle",disabled:f,className:"mt-8",onClick:y,children:x("switch-team.cta","Switch to {{teamName}}",{teamName:b})})]})})})}},516018,e=>{"use strict";e.s(["SharedConversationPageClient",()=>T],516018);var t=e.i(637651),s=e.i(246429),n=e.i(298438),i=e.i(76756),a=e.i(920958),o=e.i(463435),l=e.i(211959),r=e.i(159422),c=e.i(353315),d=e.i(380619),u=e.i(778701);e.i(685846);var m=e.i(390864),h=e.i(793936),v=e.i(235289),x=e.i(967236);e.i(916390);var p=e.i(572848),f=e.i(763578),g=e.i(713087),j=e.i(218946),w=e.i(364778);e.i(298616);var C=e.i(969286),N=e.i(179314),S=e.i(623434),b=e.i(6880);e.i(968648);var y=e.i(873329),I=e.i(500497);function k(e){let{shareLinkId:s,responses:n}=e,{t:i}=(0,y.useTranslation)("share"),o=(0,a.useLogEvent)(),r=(0,p.useSession)(),k=(0,b.useRouter)(),{routeToConversation:T}=(0,g.useGrokRouter)(),P=(0,j.useRequestErrorToastFn)(),{mutate:R,isPending:A,isSuccess:B}=(0,C.useMutation)({mutationKey:["cloneConversation"],mutationFn:e=>w.chatApi.chatCloneConversation({shareLinkId:e,body:{}}),onSuccess:e=>{e.conversation&&T(e.conversation.conversationId)},onError:e=>{P("chat-share:cloneConversation",e)}}),E=(0,c.useCallback)(()=>{o("sign_in",s,{shareLinkId:s,location:"chat-share"});let e=new URLSearchParams({return_to:"".concat(location.pathname).concat(location.search).concat(location.hash)}).toString();k.push("/sign-in".concat(e?"?".concat(e):""))},[k,s,o]),[_,{height:z}]=(0,I.useMeasure)(),[M,F]=(0,c.useState)(!1),L=(0,c.useRef)(null),U=(0,c.useCallback)(()=>{var e;null==(e=L.current)||e.scrollToBottom(),F(!1)},[]),O=(0,c.useCallback)(e=>{F(!e)},[]),D=(0,c.useMemo)(()=>n.some(e=>e.usedCustomInstructions),[n]);return(0,t.jsxs)("div",{className:"flex flex-col h-full relative items-center",children:[(0,t.jsxs)(x.ScrollContainer,{ref:L,className:(0,l.cn)("flex flex-col items-center"),onScroll:O,children:[(0,t.jsxs)("div",{className:(0,l.cn)("relative w-full flex flex-col items-center pt-20 pb-4 animate-in","@container/chat px-gutter",d.CHAT_CONTAINER_CLASSES),children:[D&&(0,t.jsxs)("div",{className:(0,l.cn)("flex flex-row items-center gap-2 text-secondary rounded-3xl px-4 py-3 mb-4","bg-surface-l2 border border-border-l1"),children:[(0,t.jsx)(h.PersonalityIcon,{className:"size-4"}),(0,t.jsx)("div",{className:"text-sm",children:i("share-link.custom-instructions","This conversation used custom instructions.")})]}),n.map((e,s)=>(0,t.jsx)(u.ResponseFamily,{responseFamily:[e],selectedId:e.responseId,onPivotResponse:()=>{},readOnly:!0,queryBarHeight:z,isLastResponse:s===n.length-1,allowBreakout:!0},e.responseId))]}),(0,t.jsx)("div",{style:{paddingBottom:z+16,width:"100%"}})]}),(0,t.jsx)("div",{className:"absolute w-full bottom-0 px-5",ref:_,children:(0,t.jsxs)("div",{className:"relative w-full flex flex-col items-center my-8",children:[(0,t.jsx)(N.AnimatePresence,{children:M?(0,t.jsx)(S.motion.div,{initial:{opacity:0,y:40,x:"0"},animate:{opacity:1,y:0,x:"0"},exit:{opacity:0,y:40,x:"0"},transition:{opacity:{duration:.1,type:"linear"},x:{duration:.25,type:"spring"},y:{duration:.25,type:"spring"}},className:(0,l.cn)("absolute h-0 bottom-1 flex items-end justify-end w-full",v.QUERY_BAR_MAX_WIDTH_CLASS,"z-40"),children:(0,t.jsx)(f.Button,{onClick:U,variant:"outline",size:"icon",className:"rounded-full bg-input backdrop-blur-sm size-8",children:(0,t.jsx)(m.ChevronDown,{size:20,className:"-mb-0.5"})})}):null}),r.user?(0,t.jsx)(f.Button,{variant:"filled",size:"md",rounded:!0,onClick:()=>{o("clone_conversation",s,{shareLinkId:s,location:"chat-share"}),R(s)},disabled:A,className:"font-semibold",children:A||B?"".concat(i("Cloning","Cloning"),"..."):i("Continue conversation","Continue conversation")}):(0,t.jsx)(f.Button,{variant:"filled",size:"md",rounded:!0,className:"font-semibold",onClick:E,children:(0,t.jsx)("div",{children:i("Sign in to continue conversation","Sign in to continue conversation")})})]})})]})}function T(e){var d;let{shareLinkId:u,conversation:m,responses:h,viewCount:v}=e,x=(0,a.useLogEvent)(),p=(0,s.useChatPageStore)(e=>e.setLastMessageId),f=(0,r.useResponseStore)(e=>e.upsertResponses),g={...m,personaId:(0,o.getPersonaIdFromSystemPromptName)(m.systemPromptName),viewCount:v},j=[];for(let e of h){let t=r.responseMetadataSchema.optional().parse(e.metadata),{toolUsageResultById:s,traceSteps:n}=(0,r.buildToolUsageAndTraceFromSteps)(e.steps),i={...e,conversationId:g.conversationId,state:"closed",toolUsageResultById:s,traceSteps:n,deepsearchPreset:null==t?void 0:t.deepsearchPreset,parentQuotedText:null==t?void 0:t.parentQuotedText,usedCustomInstructions:null==t?void 0:t.usedCustomInstructions};j.push(i)}return f(j),p(null==(d=h[h.length-1])?void 0:d.responseId),(0,c.useEffect)(()=>{var e;x("opened_share_link",u,{location:"share-page",responses:String(null==h?void 0:h.length),originalConversationId:null!=(e=null==m?void 0:m.conversationId)?e:""})},[x,u,null==h?void 0:h.length,null==m?void 0:m.conversationId]),(0,t.jsxs)("main",{className:(0,l.cn)("h-dvh w-full relative selection:bg-highlight"),children:[(0,t.jsx)(n.ChatTopNav,{conversation:g,shared:!0}),(0,t.jsx)(i.CommandMenu,{}),(0,t.jsx)(k,{shareLinkId:u,conversation:g,responses:j})]})}}]);
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="37639533-779f-5aaf-9452-ac64b2a318e0")}catch(e){}}();
//# debugId=37639533-779f-5aaf-9452-ac64b2a318e0
